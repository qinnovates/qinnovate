import{q as n,r as D,u as L,C as v,t as O,p as U}from"./react-three-fiber.esm.DgA6j6Et.js";import{r as c}from"./index.ClAeb1qX.js";const s=120,F=12,P=2.5;function _(){const M=c.useRef(null),y=c.useRef({x:0,y:0}),{viewport:G}=L(),{positions:t,velocities:j,colors:m}=c.useMemo(()=>{const d=new Float32Array(s*3),p=new Float32Array(s*3),f=new Float32Array(s*3),h=[new v("#3b82f6"),new v("#06b6d4"),new v("#8b5cf6"),new v("#10b981")];for(let a=0;a<s;a++){const e=a*3;d[e]=(Math.random()-.5)*F,d[e+1]=(Math.random()-.5)*F,d[e+2]=(Math.random()-.5)*4,p[e]=(Math.random()-.5)*.003,p[e+1]=(Math.random()-.5)*.003,p[e+2]=(Math.random()-.5)*.001;const r=h[Math.floor(Math.random()*h.length)];f[e]=r.r,f[e+1]=r.g,f[e+2]=r.b}return{positions:d,velocities:p,colors:f}},[]),w=c.useRef(null),l=c.useMemo(()=>new Float32Array(s*s*6),[]),u=c.useMemo(()=>new Float32Array(s*s*6),[]),b=c.useMemo(()=>new O,[]),g=c.useCallback(d=>{y.current.x=(d.clientX/window.innerWidth-.5)*2,y.current.y=-(d.clientY/window.innerHeight-.5)*2},[]);return c.useMemo(()=>(typeof window<"u"&&window.addEventListener("pointermove",g,{passive:!0}),()=>{typeof window<"u"&&window.removeEventListener("pointermove",g)}),[g]),U((d,p)=>{if(!M.current||!w.current)return;const f=Math.min(p,.05);let h=0;for(let a=0;a<s;a++){const e=a*3;t[e]+=j[e]*60*f,t[e+1]+=j[e+1]*60*f,t[e+2]+=j[e+2]*60*f;const r=F/2;t[e]>r&&(t[e]=-r),t[e]<-r&&(t[e]=r),t[e+1]>r&&(t[e+1]=-r),t[e+1]<-r&&(t[e+1]=r),t[e+2]>2&&(t[e+2]=-2),t[e+2]<-2&&(t[e+2]=2);const C=y.current.x*.3,A=y.current.y*.3;b.position.set(t[e]+C,t[e+1]+A,t[e+2]);const T=.02+Math.random()*.005;b.scale.setScalar(T),b.updateMatrix(),M.current.setMatrixAt(a,b.matrix);for(let E=a+1;E<s;E++){const i=E*3,R=t[e]-t[i],I=t[e+1]-t[i+1],S=t[e+2]-t[i+2],N=Math.sqrt(R*R+I*I+S*S);if(N<P){const z=1-N/P,o=h*6;l[o]=t[e]+C,l[o+1]=t[e+1]+A,l[o+2]=t[e+2],l[o+3]=t[i]+C,l[o+4]=t[i+1]+A,l[o+5]=t[i+2];const x=z*.15;u[o]=m[e]*x,u[o+1]=m[e+1]*x,u[o+2]=m[e+2]*x,u[o+3]=m[i]*x,u[o+4]=m[i+1]*x,u[o+5]=m[i+2]*x,h++}}}M.current.instanceMatrix.needsUpdate=!0,w.current.setDrawRange(0,h*2),w.current.attributes.position.needsUpdate=!0,w.current.attributes.color.needsUpdate=!0}),n.jsxs(n.Fragment,{children:[n.jsxs("instancedMesh",{ref:M,args:[void 0,void 0,s],children:[n.jsx("sphereGeometry",{args:[1,6,6]}),n.jsx("meshBasicMaterial",{color:"#3b82f6",transparent:!0,opacity:.6})]}),n.jsxs("lineSegments",{children:[n.jsxs("bufferGeometry",{ref:w,children:[n.jsx("bufferAttribute",{attach:"attributes-position",count:l.length/3,array:l,itemSize:3}),n.jsx("bufferAttribute",{attach:"attributes-color",count:u.length/3,array:u,itemSize:3})]}),n.jsx("lineBasicMaterial",{vertexColors:!0,transparent:!0,opacity:.5})]})]})}function B(){return n.jsx("div",{style:{position:"absolute",inset:0,zIndex:0},children:n.jsx(D,{camera:{position:[0,0,6],fov:60},dpr:[1,1.5],gl:{antialias:!1,alpha:!0},style:{background:"transparent"},children:n.jsx(_,{})})})}export{B as default};
