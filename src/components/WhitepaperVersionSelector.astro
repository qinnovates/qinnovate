---
interface Props {
  currentVersion: string;
}

const { currentVersion } = Astro.props;

const versions = [
  { label: 'v6.3.0', href: '/whitepaper/', current: true, date: '2026-02-18', note: 'Runemate v1.0, BCI state of art, multimodal' },
  { label: 'v6.2.3', href: '/whitepaper/', current: false, date: '2026-02-17', note: 'PQC explainers, technical accessibility' },
  { label: 'v6.0', href: '/whitepaper/v6/', current: false, date: '2026-02-16', note: 'Neurorights mapping, CCI, governance' },
  { label: 'v5.2', href: '/whitepaper/v5/', current: false, date: '2026-02-10', note: 'NISS scoring, NSP protocol, DSM-5' },
  { label: 'All older', href: 'https://github.com/qinnovates/qinnovate/tree/main/src/pages/whitepaper', current: false, date: '', note: 'v3.1, v2.0, and earlier', external: true },
];
---

<div class="glass rounded-lg p-3 mb-4">
  <p class="text-xs font-semibold tracking-wider uppercase text-[var(--color-text-faint)] mb-2">Version</p>
  <div class="space-y-1">
    {versions.map((v) => {
      const isActive = v.label === currentVersion;
      const isExternal = (v as any).external;
      return (
        <a
          href={v.href}
          class:list={[
            'group flex flex-col px-2 py-2 rounded-md text-sm transition-colors',
            isActive
              ? 'text-[var(--color-accent-primary)] bg-[var(--color-accent-primary)]/10'
              : 'text-[var(--color-text-muted)] hover:text-[var(--color-text-primary)] hover:bg-[var(--color-bg-surface)]',
          ]}
          aria-current={isActive ? 'page' : undefined}
          {...(isExternal ? { target: '_blank', rel: 'noopener noreferrer' } : {})}
        >
          <div class="flex items-center gap-2">
            <span
              class:list={[
                'w-1.5 h-1.5 rounded-full shrink-0',
                isActive
                  ? 'bg-[var(--color-accent-primary)]'
                  : 'bg-[var(--color-border)] group-hover:bg-[var(--color-text-faint)]',
              ]}
            />
            <span class="font-medium">{v.label}</span>
            {v.current && (
              <span class="ml-auto text-[10px] font-medium uppercase tracking-wide text-[var(--color-accent-primary)]">
                Current
              </span>
            )}
            {!v.current && !isExternal && (
              <span class="ml-auto text-[10px] font-medium uppercase tracking-wide text-[var(--color-text-faint)] border border-[var(--color-border)] rounded px-1 py-0.5 leading-none">
                Archive
              </span>
            )}
            {isExternal && (
              <svg class="ml-auto w-3 h-3 text-[var(--color-text-faint)]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25" />
              </svg>
            )}
          </div>
          <span class="text-[10px] text-[var(--color-text-faint)] ml-3.5 mt-0.5 leading-tight">{v.date ? `${v.date} â€” ` : ''}{v.note}</span>
        </a>
      );
    })}
  </div>
</div>
