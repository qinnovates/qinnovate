---
interface Props {
  currentVersion: string;
}

const { currentVersion } = Astro.props;

const versions = [
  { label: 'v6.2.2', href: '/whitepaper/', current: true, date: '2026-02-17', note: 'Neurorights cross-validation' },
  { label: 'v6.0', href: '/whitepaper/v6/', current: false, date: '2026-02-16', note: 'Neurorights mapping, CCI, governance' },
  { label: 'v5.2', href: '/whitepaper/v5/', current: false, date: '2026-02-10', note: 'NISS scoring, NSP protocol, DSM-5' },
  { label: 'v3.1', href: '/whitepaper/v3/', current: false, date: '2026-02-05', note: 'Three-pillar architecture, hourglass' },
  { label: 'v2.0', href: '/whitepaper/v2/', current: false, date: '2026-01-20', note: 'Foundational hourglass model' },
];
---

<div class="glass rounded-lg p-3 mb-4">
  <p class="text-xs font-semibold tracking-wider uppercase text-[var(--color-text-faint)] mb-2">Version</p>
  <div class="space-y-1">
    {versions.map((v) => {
      const isActive = v.label === currentVersion;
      return (
        <a
          href={v.href}
          class:list={[
            'group flex flex-col px-2 py-2 rounded-md text-sm transition-colors',
            isActive
              ? 'text-[var(--color-accent-primary)] bg-[var(--color-accent-primary)]/10'
              : 'text-[var(--color-text-muted)] hover:text-[var(--color-text-primary)] hover:bg-[var(--color-bg-surface)]',
          ]}
          aria-current={isActive ? 'page' : undefined}
        >
          <div class="flex items-center gap-2">
            <span
              class:list={[
                'w-1.5 h-1.5 rounded-full shrink-0',
                isActive
                  ? 'bg-[var(--color-accent-primary)]'
                  : 'bg-[var(--color-border)] group-hover:bg-[var(--color-text-faint)]',
              ]}
            />
            <span class="font-medium">{v.label}</span>
            {v.current && (
              <span class="ml-auto text-[10px] font-medium uppercase tracking-wide text-[var(--color-accent-primary)]">
                Current
              </span>
            )}
            {!v.current && (
              <span class="ml-auto text-[10px] font-medium uppercase tracking-wide text-[var(--color-text-faint)] border border-[var(--color-border)] rounded px-1 py-0.5 leading-none">
                Archive
              </span>
            )}
          </div>
          <span class="text-[10px] text-[var(--color-text-faint)] ml-3.5 mt-0.5 leading-tight">{v.date} &mdash; {v.note}</span>
        </a>
      );
    })}
  </div>
</div>
