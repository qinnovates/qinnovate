---
import { getThreatStats } from '../../lib/threat-data';

const stats = getThreatStats();
const bars = [
  { label: 'Critical', count: stats.critical, color: '#ef4444', pct: (stats.critical / stats.high) * 100 },
  { label: 'High', count: stats.high, color: '#f59e0b', pct: 100 },
  { label: 'Medium', count: stats.medium, color: '#eab308', pct: (stats.medium / stats.high) * 100 },
  { label: 'Low', count: stats.low, color: '#94a3b8', pct: (stats.low / stats.high) * 100 },
];
---

<div class="glass rounded-xl p-6">
  <h3 class="text-lg font-semibold font-[family-name:var(--font-heading)] mb-1 text-[var(--color-text-primary)]">
    Severity Distribution
  </h3>
  <p class="text-xs text-[var(--color-text-faint)] mb-4">
    Classified by potential impact on neural integrity
  </p>

  <div class="flex flex-col gap-3">
    {bars.map((bar) => (
      <div class="flex items-center gap-3">
        <span
          class="w-16 shrink-0 text-sm font-medium text-[var(--color-text-muted)] text-right"
        >
          {bar.label}
        </span>
        <div class="flex-1 h-7 rounded bg-[var(--color-bg-surface)] overflow-hidden">
          <div
            class="h-full rounded transition-all"
            style={`width: ${bar.pct}%; background-color: ${bar.color};`}
          />
        </div>
        <span class="w-8 shrink-0 text-sm font-semibold text-[var(--color-text-primary)] text-right">
          {bar.count}
        </span>
      </div>
    ))}
  </div>

  <p class="mt-4 pt-3 border-t border-[var(--color-border)] text-xs text-[var(--color-text-muted)] text-center">
    <span class="font-semibold text-[var(--color-text-primary)]">{stats.total}</span> techniques catalogued
  </p>
</div>
