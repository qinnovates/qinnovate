---
const cvssMetrics = [
  { name: 'Confidentiality', abbr: 'C' },
  { name: 'Integrity', abbr: 'I' },
  { name: 'Availability', abbr: 'A' },
];

const nissMetrics = [
  { name: 'Biological Impact', abbr: 'BI', missedByCvss: true },
  { name: 'Cognitive Integrity', abbr: 'CG', missedByCvss: true },
  { name: 'Consent Violation', abbr: 'CV', missedByCvss: true },
  { name: 'Reversibility', abbr: 'RV', missedByCvss: true },
  { name: 'Neuroplasticity', abbr: 'NP', missedByCvss: true },
];
---

<div class="glass rounded-xl p-6">
  <h3 class="text-lg font-semibold font-[family-name:var(--font-heading)] mb-1 text-[var(--color-text-primary)]">
    CVSS vs NISS: The Scoring Gap
  </h3>
  <p class="text-xs text-[var(--color-text-faint)] mb-5">
    94.4% of techniques have neural impacts invisible to CVSS
  </p>

  {/* Side-by-side comparison */}
  <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
    {/* CVSS column */}
    <div>
      <div class="flex items-center gap-2 mb-3">
        <span class="w-3 h-3 rounded-full bg-[#64748b] shrink-0" />
        <span class="text-sm font-semibold text-[var(--color-text-primary)]">CVSS v4.0</span>
        <span class="text-[10px] text-[var(--color-text-faint)] ml-auto">3 metrics</span>
      </div>
      <div class="flex flex-col gap-2">
        {cvssMetrics.map((metric) => (
          <div class="flex items-center gap-2 rounded-lg border border-[#64748b]/30 bg-[#64748b]/[0.06] px-3 py-2">
            <span class="text-xs font-mono font-bold text-[#64748b] w-6 shrink-0">{metric.abbr}</span>
            <span class="text-sm text-[var(--color-text-muted)]">{metric.name}</span>
          </div>
        ))}
        {/* Empty gap visual */}
        <div class="flex items-center justify-center rounded-lg border border-dashed border-[var(--color-border)] px-3 py-2 opacity-40">
          <span class="text-xs text-[var(--color-text-faint)] italic">No neural metrics</span>
        </div>
        <div class="flex items-center justify-center rounded-lg border border-dashed border-[var(--color-border)] px-3 py-2 opacity-40">
          <span class="text-xs text-[var(--color-text-faint)] italic">No neural metrics</span>
        </div>
      </div>
    </div>

    {/* NISS column */}
    <div>
      <div class="flex items-center gap-2 mb-3">
        <span class="w-3 h-3 rounded-full bg-[#10b981] shrink-0" />
        <span class="text-sm font-semibold text-[var(--color-text-primary)]">NISS v1.0</span>
        <span class="text-[10px] text-[var(--color-text-faint)] ml-auto">5 metrics</span>
      </div>
      <div class="flex flex-col gap-2">
        {nissMetrics.map((metric) => (
          <div class="niss-metric-box flex items-center gap-2 rounded-lg border border-[#10b981]/40 bg-[#10b981]/[0.06] px-3 py-2 relative">
            <span class="text-xs font-mono font-bold text-[#10b981] w-6 shrink-0">{metric.abbr}</span>
            <span class="text-sm text-[var(--color-text-muted)]">{metric.name}</span>
            {metric.missedByCvss && (
              <span class="ml-auto text-[9px] font-semibold uppercase tracking-wide text-[#ef4444] shrink-0">
                New
              </span>
            )}
          </div>
        ))}
      </div>
    </div>
  </div>

  {/* Callout */}
  <div class="mt-5 rounded-lg border border-[#ef4444]/30 bg-[#ef4444]/[0.04] px-4 py-3">
    <p class="text-xs text-[var(--color-text-muted)] leading-relaxed">
      <span class="font-semibold text-[#ef4444]">5 metrics vs 3</span> &mdash;
      NISS captures
      <span class="font-medium text-[var(--color-text-primary)]">biological damage</span>,
      <span class="font-medium text-[var(--color-text-primary)]">cognitive integrity</span>,
      <span class="font-medium text-[var(--color-text-primary)]">consent violations</span>,
      <span class="font-medium text-[var(--color-text-primary)]">reversibility</span>, and
      <span class="font-medium text-[var(--color-text-primary)]">neuroplastic changes</span>
      that CVSS cannot express. Traditional scoring treats a brain implant breach the same as a stolen cookie.
    </p>
  </div>

  <p class="mt-4 pt-3 border-t border-[var(--color-border)] text-xs text-[var(--color-text-muted)] text-center leading-relaxed">
    NISS is purpose-built for neural security &mdash; every metric addresses a dimension of harm unique to brain&ndash;computer interfaces
  </p>
</div>
