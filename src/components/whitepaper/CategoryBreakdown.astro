---
const maxCount = 18;

const categories = [
  { name: 'Signal Injection', abbr: 'SI', count: 18 },
  { name: 'Cognitive Integrity', abbr: 'CI', count: 16 },
  { name: 'Data Manipulation', abbr: 'DM', count: 14 },
  { name: 'Privilege Escalation', abbr: 'PE', count: 12 },
  { name: 'Denial of Service', abbr: 'DS', count: 11 },
  { name: 'Physical Safety', abbr: 'PS', count: 10 },
  { name: 'Signal Eavesdropping', abbr: 'SE', count: 9 },
  { name: 'Data Exfiltration', abbr: 'EX', count: 9 },
].sort((a, b) => b.count - a.count);

// Map index to opacity so highest count is most vivid
const opacities = [1, 0.9, 0.8, 0.7, 0.6, 0.5, 0.45, 0.4];
---

<div class="glass rounded-xl p-6">
  <h3 class="text-lg font-semibold font-[family-name:var(--font-heading)] mb-1 text-[var(--color-text-primary)]">
    Attack Categories
  </h3>
  <p class="text-xs text-[var(--color-text-faint)] mb-4">
    8 taxonomic categories spanning the BCI attack surface
  </p>

  <div class="flex flex-col gap-2.5">
    {categories.map((cat, i) => (
      <div class="flex items-center gap-3">
        <span class="w-40 sm:w-48 shrink-0 text-sm text-[var(--color-text-muted)] text-right truncate">
          {cat.name}
          <span class="ml-1 text-xs text-[var(--color-text-faint)]">({cat.abbr})</span>
        </span>
        <div class="flex-1 h-6 rounded bg-[var(--color-bg-surface)] overflow-hidden">
          <div
            class="h-full rounded"
            style={`width: ${(cat.count / maxCount) * 100}%; background-color: var(--color-accent-primary); opacity: ${opacities[i]};`}
          />
        </div>
        <span class="w-8 shrink-0 text-sm font-semibold text-[var(--color-text-primary)] text-right">
          {cat.count}
        </span>
      </div>
    ))}
  </div>
</div>
