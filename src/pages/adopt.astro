---
import BaseLayout from '../layouts/BaseLayout.astro';
import Nav from '../components/Nav.astro';
import Footer from '../components/Footer.astro';
import { QIF_VERSION, HOURGLASS_BANDS } from '../lib/qif-constants';
import { THREAT_VECTORS } from '../lib/threat-data';
const totalTechniques = THREAT_VECTORS.length;
import '../styles/global.css';

const steps = [
  {
    number: '01',
    title: 'Read the Specification',
    description: 'The QIF whitepaper defines the 11-band hourglass architecture, coherence metrics, and threat modeling methodology. Published under Apache 2.0.',
    link: { href: '/whitepaper/', label: 'Read the Whitepaper' },
  },
  {
    number: '02',
    title: 'Assess Your Device',
    description: 'Map your neural device to QIF\'s 11-band model. Use TARA to identify relevant attack techniques across every band. Score findings with NISS.',
    link: { href: '/TARA/', label: 'Browse TARA Atlas' },
  },
  {
    number: '03',
    title: 'Implement and Contribute',
    description: 'Integrate QIF into your security architecture and regulatory submissions. Report new attack techniques back to TARA to strengthen the standard for everyone.',
    link: { href: '/framework/', label: 'Explore the Framework' },
  },
];

const participationTiers = [
  {
    name: 'Adopter',
    description: 'Use QIF, TARA, and NISS in your organization. No sign-up required. The specification and all tools are open.',
    color: 'var(--color-accent-secondary)',
  },
  {
    name: 'Contributor',
    description: 'Submit new TARA techniques, validate NISS scores against real devices, participate in working group discussions, and co-author publications.',
    color: 'var(--color-accent-primary)',
  },
  {
    name: 'Alliance Member',
    description: 'Shape the direction of the standard. Governance participation, early access to threat intelligence, quarterly briefings, and working group leadership.',
    color: 'var(--color-accent-tertiary)',
  },
];
---

<BaseLayout
  title="Adopt QIF — Qinnovate"
  description="Adopt the Quantified Interconnection Framework for brain-computer interface security. The specification, threat atlas, and scoring system are open and free."
>
  <Nav />

  <!-- ═══ HERO ═══ -->
  <section class="relative min-h-[60vh] flex items-center justify-center px-4 overflow-hidden">
    <div class="absolute inset-0 bg-[var(--color-bg-deep)]">
      <div class="absolute inset-0 opacity-30" style="background: radial-gradient(ellipse at 50% 40%, rgba(59,130,246,0.12) 0%, transparent 60%), radial-gradient(ellipse at 70% 60%, rgba(6,182,212,0.08) 0%, transparent 50%);"></div>
    </div>

    <div class="relative z-10 text-center max-w-4xl mx-auto pt-24 pb-16">
      <p class="text-sm font-medium tracking-[0.2em] uppercase text-[var(--color-accent-secondary)] mb-6">
        Open Standard
      </p>

      <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold font-[family-name:var(--font-heading)] tracking-tight mb-6 leading-[1.1]">
        <span class="text-[var(--color-text-primary)]">The first security model</span>
        <br />
        <span class="bg-gradient-to-r from-[var(--color-accent-primary)] via-[var(--color-accent-secondary)] to-[var(--color-accent-tertiary)] bg-clip-text text-transparent">
          for brain-computer interfaces.
        </span>
      </h1>

      <p class="text-lg sm:text-xl text-[var(--color-text-muted)] mb-10 max-w-2xl mx-auto leading-relaxed">
        QIF maps every threat surface from silicon to cortex. TARA catalogs {totalTechniques} techniques. NISS scores what CVSS cannot. The specification is open, free, and ready to use.
      </p>

      <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
        <a
          href="/framework/"
          class="px-8 py-3.5 rounded-lg bg-[var(--color-accent-primary)] text-white font-medium hover:bg-[var(--color-accent-primary)]/90 transition-colors"
        >
          Explore the Framework
        </a>
        <a
          href="#how-to-adopt"
          class="px-8 py-3.5 rounded-lg glass text-[var(--color-text-primary)] font-medium hover:bg-white/10 transition-colors"
        >
          How to Adopt
        </a>
      </div>
    </div>
  </section>

  <!-- ═══ STATS BAR ═══ -->
  <section class="border-y border-[var(--color-border)] bg-[var(--color-bg-deep)]">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div class="grid grid-cols-2 sm:grid-cols-4 gap-8 text-center">
        <div>
          <div class="text-2xl sm:text-3xl font-bold font-[family-name:var(--font-heading)] text-[var(--color-accent-primary)]">11</div>
          <div class="text-xs text-[var(--color-text-faint)] mt-1">Security Bands</div>
        </div>
        <div>
          <div class="text-2xl sm:text-3xl font-bold font-[family-name:var(--font-heading)] text-[var(--color-accent-secondary)]">{totalTechniques}</div>
          <div class="text-xs text-[var(--color-text-faint)] mt-1">Catalogued Techniques (TARA)</div>
        </div>
        <div>
          <div class="text-2xl sm:text-3xl font-bold font-[family-name:var(--font-heading)] text-[var(--color-accent-tertiary)]">5</div>
          <div class="text-xs text-[var(--color-text-faint)] mt-1">Neural Impact Metrics (NISS)</div>
        </div>
        <div>
          <div class="text-2xl sm:text-3xl font-bold font-[family-name:var(--font-heading)] text-[var(--color-status-safe)]">Apache 2.0</div>
          <div class="text-xs text-[var(--color-text-faint)] mt-1">Open License</div>
        </div>
      </div>
    </div>
  </section>

  <!-- ═══ COMING SOON BANNER ═══ -->
  <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 pt-8">
    <div class="glass" style="border-left: 4px solid var(--color-accent-primary); padding: 1rem 1.5rem; margin-bottom: 2rem;">
      <p style="margin: 0; font-weight: 600;">Coming Soon</p>
      <p style="margin: 0.25rem 0 0; opacity: 0.8; font-size: 0.9rem;">Early adopter program launching Q2 2026. Sign up below to be notified.</p>
    </div>
  </div>

  <!-- ═══ THE HOURGLASS MODEL ═══ -->
  <section class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-20">
    <div class="text-center mb-12">
      <h2 class="text-2xl sm:text-3xl font-bold font-[family-name:var(--font-heading)] mb-4">The Hourglass</h2>
      <p class="text-[var(--color-text-muted)] max-w-2xl mx-auto">
        QIF models the entire neurotechnology stack — from neural tissue to wireless telemetry — as an 11-band hourglass. Its 7-1-3 architecture places the physical brain-computer interface at the critical waist: the convergence point for both technical and ethical controls.
      </p>
    </div>

    <div class="max-w-md mx-auto relative" id="hourglass-preview">
      <span class="absolute right-0 flex items-center justify-center text-[10px] font-semibold tracking-[0.15em] uppercase text-[#b8860b] opacity-40" style="writing-mode: vertical-rl; top: 0; height: 58%;">Neural</span>
      <span class="absolute right-0 flex items-center justify-center text-[10px] font-semibold tracking-[0.15em] uppercase text-[#3d749c] opacity-40" style="writing-mode: vertical-rl; bottom: 0; height: 24%;">Silicon</span>

      <div class="space-y-1.5 pr-6">
        {HOURGLASS_BANDS.map((band, i) => {
          const widths = [88, 80, 72, 64, 56, 48, 40, 32, 48, 64, 80];
          const width = widths[i];
          const isInterface = band.zone === 'interface';
          const bgOpacity = isInterface ? '55' : band.zone === 'neural' ? '40' : '35';
          const borderOpacity = isInterface ? '' : band.zone === 'neural' ? '65' : '55';
          return (
            <div class={`flex items-center gap-3 group cursor-pointer ${band.id === 'S1' ? 'mt-3' : ''}`} title={band.description}>
              <span class="text-xs text-[var(--color-text-faint)] w-8 text-right font-mono shrink-0">{band.id}</span>
              <div
                class={`h-8 rounded-md flex items-center px-3 transition-all duration-300 ease-out group-hover:translate-x-1 group-hover:brightness-110 ${isInterface ? 'interface-glow h-10 rounded-lg' : ''}`}
                style={`width: ${width}%; background: ${band.color}${bgOpacity}; border: ${isInterface ? '2' : '1'}px solid ${isInterface ? band.color : band.color + borderOpacity}; margin: 0 auto;${isInterface ? ` box-shadow: 0 0 20px ${band.color}50, 0 0 40px ${band.color}25, inset 0 0 12px ${band.color}18;` : ''}`}
              >
                <span class={`text-xs ${isInterface ? 'font-bold tracking-wide' : 'font-medium'}`} style={`color: ${band.color}`}>{band.name}</span>
              </div>
            </div>
          );
        })}
      </div>
    </div>

    <style>
      .interface-glow {
        animation: interface-breathe 3s ease-in-out infinite;
        position: relative;
        overflow: hidden;
      }
      .interface-glow::after {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(90deg, transparent 0%, #d4436a18 40%, #d4436a30 50%, #d4436a18 60%, transparent 100%);
        animation: interface-shimmer 4s ease-in-out infinite;
      }
      @keyframes interface-breathe {
        0%, 100% {
          box-shadow: 0 0 20px #d4436a50, 0 0 40px #d4436a25, inset 0 0 12px #d4436a18;
        }
        50% {
          box-shadow: 0 0 28px #d4436a65, 0 0 56px #d4436a35, inset 0 0 18px #d4436a25;
        }
      }
      @keyframes interface-shimmer {
        0%, 100% { opacity: 0; transform: translateX(-100%); }
        50% { opacity: 1; transform: translateX(100%); }
      }
    </style>

    <div class="text-center mt-8">
      <a href="/framework/" class="text-sm text-[var(--color-accent-primary)] hover:text-[var(--color-accent-secondary)] transition-colors">
        Explore the full interactive model &rarr;
      </a>
    </div>
  </section>

  <!-- ═══ THE STANDARD IS OPEN — Self-serve resources ═══ -->
  <section class="border-y border-[var(--color-border)] bg-[var(--color-bg-deep)]">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-20">
    <div class="mb-12 max-w-3xl">
      <h2 class="text-2xl sm:text-3xl font-bold font-[family-name:var(--font-heading)] mb-4">The standard is open.</h2>
      <p class="text-[var(--color-text-muted)] leading-relaxed">
        The QIF specification, TARA threat atlas, and NISS scoring system are published under Apache 2.0. No login, no account, no paywall. Read the spec, assess your device, and adopt the standard at your own pace.
      </p>
    </div>

    <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6">
      <a href="/whitepaper/" class="glass rounded-xl p-6 card-hover group">
        <p class="text-xs font-semibold uppercase tracking-wider text-[var(--color-accent-primary)] mb-3">Specification</p>
        <h3 class="text-base font-semibold font-[family-name:var(--font-heading)] mb-2 group-hover:text-[var(--color-accent-primary)] transition-colors">
          QIF Whitepaper v{QIF_VERSION}
        </h3>
        <p class="text-sm text-[var(--color-text-muted)] leading-relaxed">
          Full specification — 11-band architecture, coherence metrics, and threat modeling methodology.
        </p>
      </a>
      <a href="/TARA/" class="glass rounded-xl p-6 card-hover group">
        <p class="text-xs font-semibold uppercase tracking-wider text-[var(--color-accent-tertiary)] mb-3">Threat Atlas</p>
        <h3 class="text-base font-semibold font-[family-name:var(--font-heading)] mb-2 group-hover:text-[var(--color-accent-tertiary)] transition-colors">
          TARA Atlas
        </h3>
        <p class="text-sm text-[var(--color-text-muted)] leading-relaxed">
          {totalTechniques} BCI techniques with NISS severity scores, MITRE mappings, and clinical overlays.
        </p>
      </a>
      <a href="/governance/" class="glass rounded-xl p-6 card-hover group">
        <p class="text-xs font-semibold uppercase tracking-wider text-[#b8860b] mb-3">Neuroethics</p>
        <h3 class="text-base font-semibold font-[family-name:var(--font-heading)] mb-2 group-hover:text-[#b8860b] transition-colors">
          Governance &amp; Ethics
        </h3>
        <p class="text-sm text-[var(--color-text-muted)] leading-relaxed">
          Consent frameworks, cognitive sovereignty, regulatory compliance, and neural data governance.
        </p>
      </a>
      <a href="/framework/" class="glass rounded-xl p-6 card-hover group">
        <p class="text-xs font-semibold uppercase tracking-wider text-[var(--color-accent-secondary)] mb-3">Interactive</p>
        <h3 class="text-base font-semibold font-[family-name:var(--font-heading)] mb-2 group-hover:text-[var(--color-accent-secondary)] transition-colors">
          Model Explorer
        </h3>
        <p class="text-sm text-[var(--color-text-muted)] leading-relaxed">
          Explore the hourglass model, band-level threat breakdowns, and the scoring system.
        </p>
      </a>
    </div>
    </div>
  </section>

  <!-- ═══ HOW TO ADOPT — NIST-style step-by-step ═══ -->
  <section class="border-y border-[var(--color-border)] bg-[var(--color-bg-deep)]" id="how-to-adopt">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-20">
      <div class="mb-12">
        <p class="text-sm font-medium tracking-[0.15em] uppercase text-[var(--color-accent-secondary)] mb-3">Getting Started</p>
        <h2 class="text-2xl sm:text-3xl font-bold font-[family-name:var(--font-heading)]">How to Adopt QIF</h2>
      </div>

      <div class="space-y-8">
        {steps.map((step) => (
          <div class="flex items-start gap-6">
            <div class="text-3xl font-bold font-[family-name:var(--font-heading)] text-[var(--color-accent-primary)]/30 shrink-0 w-12">
              {step.number}
            </div>
            <div>
              <h3 class="text-lg font-semibold font-[family-name:var(--font-heading)] mb-2">{step.title}</h3>
              <p class="text-sm text-[var(--color-text-muted)] leading-relaxed mb-3">{step.description}</p>
              <a href={step.link.href} class="text-sm text-[var(--color-accent-primary)] hover:text-[var(--color-accent-secondary)] transition-colors font-medium">
                {step.link.label} &#8594;
              </a>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- ═══ PURPLE TEAM — Attack, defend, publish ═══ -->
  <section class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-20">
    <div class="mb-12 max-w-3xl">
      <p class="text-sm font-medium tracking-[0.15em] uppercase text-[var(--color-accent-secondary)] mb-3">Purple Team Research</p>
      <h2 class="text-2xl sm:text-3xl font-bold font-[family-name:var(--font-heading)] mb-4">Discover. Test. Defend.</h2>
      <p class="text-[var(--color-text-muted)] leading-relaxed">
        Our mission is to find the vulnerabilities before they're exploited, validate them in controlled environments, and build the standards that pave the way for safer, more innovative neurotechnology.
      </p>
    </div>

    <!-- Case Study -->
    <div class="glass rounded-xl p-6 sm:p-8 mb-8" style="border-left: 4px solid var(--color-accent-primary);">
      <div class="flex items-start gap-3 mb-4">
        <span class="text-xs font-semibold uppercase tracking-wider px-2 py-1 rounded-full bg-[var(--color-status-breach)]/10 text-[var(--color-status-breach)]">CVE Disclosed</span>
        <span class="text-xs font-semibold uppercase tracking-wider px-2 py-1 rounded-full bg-[var(--color-accent-primary)]/10 text-[var(--color-accent-primary)]">CVSS 8.6 High</span>
      </div>

      <h3 class="text-lg font-semibold font-[family-name:var(--font-heading)] mb-2">
        Consumer Audio to Neural Eavesdropping: A 5-Level Attack Chain
      </h3>

      <p class="text-sm text-[var(--color-text-muted)] leading-relaxed mb-6">
        TARA's cross-band threat model traced a 9-year-old RealTek audio codec vulnerability through five escalation levels — from acoustic eavesdropping to neural signal capture. Traditional IT security frameworks stopped at the software bug. TARA followed the physics across all 11 QIF bands.
      </p>

      <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6">
        <div class="glass rounded-lg p-4 text-center">
          <div class="text-2xl font-bold font-[family-name:var(--font-heading)] text-[var(--color-status-breach)]">1</div>
          <div class="text-xs text-[var(--color-text-faint)] mt-1">Unfiled CVE discovered</div>
        </div>
        <div class="glass rounded-lg p-4 text-center">
          <div class="text-2xl font-bold font-[family-name:var(--font-heading)] text-[var(--color-accent-primary)]">5</div>
          <div class="text-xs text-[var(--color-text-faint)] mt-1">Attack levels mapped</div>
        </div>
        <div class="glass rounded-lg p-4 text-center">
          <div class="text-2xl font-bold font-[family-name:var(--font-heading)] text-[var(--color-accent-secondary)]">5</div>
          <div class="text-xs text-[var(--color-text-faint)] mt-1">QIF bands crossed</div>
        </div>
        <div class="glass rounded-lg p-4 text-center">
          <div class="text-2xl font-bold font-[family-name:var(--font-heading)] text-[var(--color-accent-tertiary)]">3</div>
          <div class="text-xs text-[var(--color-text-faint)] mt-1">New TARA techniques added</div>
        </div>
      </div>

      <div class="flex items-center gap-4 text-sm">
        <a href="/publications/2026-02-11-tara-first-cve-realtek-audio-jack-retasking/" class="text-[var(--color-accent-primary)] hover:text-[var(--color-accent-secondary)] transition-colors font-medium">
          Read the full analysis &#8594;
        </a>
        <a href="/TARA/" class="text-[var(--color-text-faint)] hover:text-[var(--color-text-muted)] transition-colors">
          View the TARA atlas &#8594;
        </a>
      </div>
    </div>

    <div class="grid sm:grid-cols-3 gap-6">
      <div class="glass rounded-xl p-6">
        <p class="text-xs font-semibold uppercase tracking-wider text-[var(--color-status-breach)] mb-3">Attack</p>
        <h3 class="text-base font-semibold font-[family-name:var(--font-heading)] mb-2">Break the Device</h3>
        <p class="text-sm text-[var(--color-text-muted)] leading-relaxed">
          Penetration testing and vulnerability research on BCIs, neural data pipelines, and medical device ecosystems. Find every way in.
        </p>
      </div>
      <div class="glass rounded-xl p-6">
        <p class="text-xs font-semibold uppercase tracking-wider text-[var(--color-accent-primary)] mb-3">Defend</p>
        <h3 class="text-base font-semibold font-[family-name:var(--font-heading)] mb-2">Engineer the Fix</h3>
        <p class="text-sm text-[var(--color-text-muted)] leading-relaxed">
          Build countermeasures for every attack chain. Validate defenses under stress. Score residual risk with NISS. Repeat until it holds.
        </p>
      </div>
      <div class="glass rounded-xl p-6">
        <p class="text-xs font-semibold uppercase tracking-wider text-[var(--color-status-safe)] mb-3">Publish</p>
        <h3 class="text-base font-semibold font-[family-name:var(--font-heading)] mb-2">Feed the Standard</h3>
        <p class="text-sm text-[var(--color-text-muted)] leading-relaxed">
          Every validated attack and defense goes into TARA with full NISS scoring, MITRE mappings, and remediation guidance. The atlas grows from real research.
        </p>
      </div>
    </div>
  </section>

  <!-- ═══ WHO ADOPTS ═══ -->
  <section class="border-y border-[var(--color-border)] bg-[var(--color-bg-deep)]">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-20">
      <div class="mb-12">
        <h2 class="text-2xl sm:text-3xl font-bold font-[family-name:var(--font-heading)]">Who Adopts QIF</h2>
      </div>

      <div class="grid sm:grid-cols-2 gap-6">
        <div class="glass rounded-xl p-6">
          <h3 class="text-base font-semibold font-[family-name:var(--font-heading)] mb-2">Neurotech Companies</h3>
          <p class="text-sm text-[var(--color-text-muted)] leading-relaxed">
            Building implantable or wearable neural devices. QIF provides the security architecture your FDA submission requires and your investors expect.
          </p>
        </div>
        <div class="glass rounded-xl p-6">
          <h3 class="text-base font-semibold font-[family-name:var(--font-heading)] mb-2">Medical Device Manufacturers</h3>
          <p class="text-sm text-[var(--color-text-muted)] leading-relaxed">
            Navigating FDA 524B cybersecurity mandates for neural-interfacing devices. TARA provides the threat catalog. NISS provides the scoring.
          </p>
        </div>
        <div class="glass rounded-xl p-6">
          <h3 class="text-base font-semibold font-[family-name:var(--font-heading)] mb-2">Research Institutions</h3>
          <p class="text-sm text-[var(--color-text-muted)] leading-relaxed">
            Universities and labs running BCI trials. QIF gives your IRB the threat model it doesn't yet know to ask for.
          </p>
        </div>
        <div class="glass rounded-xl p-6">
          <h3 class="text-base font-semibold font-[family-name:var(--font-heading)] mb-2">Neuroethics &amp; Policy</h3>
          <p class="text-sm text-[var(--color-text-muted)] leading-relaxed">
            Ethicists, regulatory agencies, and patient advocates defining neural rights. QIF bridges security engineering and neuroethics with consent frameworks, cognitive sovereignty protections, and governance documentation.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- ═══ PARTICIPATE — Standards body membership ═══ -->
  <section class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-20" id="participate">
    <div class="mb-12 max-w-3xl">
      <p class="text-sm font-medium tracking-[0.15em] uppercase text-[var(--color-accent-secondary)] mb-3">Participate</p>
      <h2 class="text-2xl sm:text-3xl font-bold font-[family-name:var(--font-heading)] mb-4">Help Shape the Standard</h2>
      <p class="text-[var(--color-text-muted)] leading-relaxed">
        QIF improves when more organizations use it. Contribute new attack techniques to TARA, validate NISS against real devices, and join the working groups defining the next version of the standard.
      </p>
    </div>

    <div class="grid sm:grid-cols-3 gap-6 mb-12">
      {participationTiers.map((tier) => (
        <div class="glass rounded-xl p-6">
          <div class="text-xs font-semibold uppercase tracking-wider mb-3" style={`color: ${tier.color}`}>
            {tier.name}
          </div>
          <p class="text-sm text-[var(--color-text-muted)] leading-relaxed">{tier.description}</p>
        </div>
      ))}
    <div class="glass rounded-xl p-6 flex items-start gap-4">
      <div class="text-2xl shrink-0 mt-0.5">&#128172;</div>
      <div>
        <h3 class="text-base font-semibold font-[family-name:var(--font-heading)] mb-1">Join the Discussion</h3>
        <p class="text-sm text-[var(--color-text-muted)] leading-relaxed mb-3">
          Propose new TARA techniques, discuss NISS scoring methodology, debate neuroethics governance questions, or ask anything about QIF.
        </p>
        <a href="https://github.com/qinnovates/qinnovate/discussions" target="_blank" rel="noopener noreferrer" class="text-sm text-[var(--color-accent-primary)] hover:text-[var(--color-accent-secondary)] transition-colors font-medium">
          GitHub Discussions &#8594;
        </a>
      </div>
    </div>
    </div>
  </section>

  <!-- ═══ GET IN TOUCH — Institutional, not salesy ═══ -->
  <section class="border-t border-[var(--color-border)] bg-[var(--color-bg-deep)]" id="contact">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-20">
      <div class="grid md:grid-cols-2 gap-12 items-start">
        <!-- Left: Copy -->
        <div>
          <h2 class="text-2xl sm:text-3xl font-bold font-[family-name:var(--font-heading)] mb-6">Get in Touch</h2>
          <p class="text-[var(--color-text-muted)] leading-relaxed mb-8">
            Whether you're adopting QIF, contributing to TARA, or exploring a research collaboration — we'd like to hear from you.
          </p>

          <div class="space-y-4 text-sm mb-8">
            <div class="flex items-start gap-3">
              <span class="text-[var(--color-accent-primary)] mt-0.5 shrink-0">&#8250;</span>
              <span class="text-[var(--color-text-muted)]"><strong class="text-[var(--color-text-primary)]">Adopting QIF?</strong> The specification is self-serve. Reach out if you need guidance on mapping QIF to your device architecture or regulatory submission.</span>
            </div>
            <div class="flex items-start gap-3">
              <span class="text-[var(--color-accent-primary)] mt-0.5 shrink-0">&#8250;</span>
              <span class="text-[var(--color-text-muted)]"><strong class="text-[var(--color-text-primary)]">Security research?</strong> We red team BCI devices and neural data pipelines. If you're building a neural interface and want it tested, let's talk.</span>
            </div>
            <div class="flex items-start gap-3">
              <span class="text-[var(--color-accent-primary)] mt-0.5 shrink-0">&#8250;</span>
              <span class="text-[var(--color-text-muted)]"><strong class="text-[var(--color-text-primary)]">Contributing?</strong> Submit new TARA techniques, validate NISS scores, or join a working group.</span>
            </div>
          </div>

          <p class="text-sm text-[var(--color-text-faint)]">
            Or email directly: <a href="mailto:advisory@qinnovate.com" class="text-[var(--color-accent-primary)] hover:text-[var(--color-accent-secondary)] transition-colors">advisory@qinnovate.com</a>
          </p>
        </div>

        <!-- Right: Form -->
        <div class="glass rounded-xl p-6 sm:p-8">
          <form id="adopt-form" class="space-y-5">
            <div class="grid sm:grid-cols-2 gap-4">
              <div>
                <label for="name" class="block text-sm font-medium text-[var(--color-text-primary)] mb-1.5">Name *</label>
                <input
                  type="text"
                  id="name"
                  name="name"
                  required
                  class="w-full px-4 py-2.5 rounded-lg bg-[var(--color-bg-deep)] border border-[var(--color-border)] text-[var(--color-text-primary)] text-sm placeholder:text-[var(--color-text-faint)] focus:outline-none focus:border-[var(--color-accent-primary)] focus:ring-1 focus:ring-[var(--color-accent-primary)] transition-colors"
                  placeholder="Your name"
                />
              </div>
              <div>
                <label for="email" class="block text-sm font-medium text-[var(--color-text-primary)] mb-1.5">Email *</label>
                <input
                  type="email"
                  id="email"
                  name="email"
                  required
                  class="w-full px-4 py-2.5 rounded-lg bg-[var(--color-bg-deep)] border border-[var(--color-border)] text-[var(--color-text-primary)] text-sm placeholder:text-[var(--color-text-faint)] focus:outline-none focus:border-[var(--color-accent-primary)] focus:ring-1 focus:ring-[var(--color-accent-primary)] transition-colors"
                  placeholder="you@organization.com"
                />
              </div>
            </div>

            <div>
              <label for="org" class="block text-sm font-medium text-[var(--color-text-primary)] mb-1.5">Organization</label>
              <input
                type="text"
                id="org"
                name="organization"
                class="w-full px-4 py-2.5 rounded-lg bg-[var(--color-bg-deep)] border border-[var(--color-border)] text-[var(--color-text-primary)] text-sm placeholder:text-[var(--color-text-faint)] focus:outline-none focus:border-[var(--color-accent-primary)] focus:ring-1 focus:ring-[var(--color-accent-primary)] transition-colors"
                placeholder="Company, university, or lab"
              />
            </div>

            <div>
              <label for="interest" class="block text-sm font-medium text-[var(--color-text-primary)] mb-1.5">I'm interested in</label>
              <select
                id="interest"
                name="interest"
                class="w-full px-4 py-2.5 rounded-lg bg-[var(--color-bg-deep)] border border-[var(--color-border)] text-[var(--color-text-primary)] text-sm focus:outline-none focus:border-[var(--color-accent-primary)] focus:ring-1 focus:ring-[var(--color-accent-primary)] transition-colors"
              >
                <option value="">Select one</option>
                <option value="adopting">Adopting QIF for my organization</option>
                <option value="security-research">Security research / red teaming</option>
                <option value="contributing">Contributing to TARA or NISS</option>
                <option value="research-collaboration">Research collaboration</option>
                <option value="alliance">Alliance membership</option>
                <option value="other">Something else</option>
              </select>
            </div>

            <div>
              <label for="message" class="block text-sm font-medium text-[var(--color-text-primary)] mb-1.5">Message *</label>
              <textarea
                id="message"
                name="message"
                required
                rows="4"
                class="w-full px-4 py-2.5 rounded-lg bg-[var(--color-bg-deep)] border border-[var(--color-border)] text-[var(--color-text-primary)] text-sm placeholder:text-[var(--color-text-faint)] focus:outline-none focus:border-[var(--color-accent-primary)] focus:ring-1 focus:ring-[var(--color-accent-primary)] transition-colors resize-y"
                placeholder="Tell us what you're working on."
              ></textarea>
            </div>

            <button
              type="submit"
              class="w-full px-6 py-3 rounded-lg bg-[var(--color-accent-primary)] text-white font-medium hover:bg-[var(--color-accent-primary)]/90 transition-colors text-sm"
            >
              Send Message
            </button>

            <div id="form-success" class="hidden rounded-lg bg-[var(--color-status-safe)]/10 border border-[var(--color-status-safe)]/30 p-4">
              <p class="text-sm text-[var(--color-status-safe)] font-medium">Message received. We'll be in touch.</p>
            </div>
            <div id="form-error" class="hidden rounded-lg bg-[var(--color-status-breach)]/10 border border-[var(--color-status-breach)]/30 p-4">
              <p class="text-sm text-[var(--color-status-breach)] font-medium">Something went wrong. Please email us directly.</p>
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>

  <Footer />
</BaseLayout>

<script>
  const FORM_ENDPOINT = '';

  function initForm() {
    const form = document.getElementById('adopt-form') as HTMLFormElement;
    const success = document.getElementById('form-success');
    const error = document.getElementById('form-error');

    form?.addEventListener('submit', async (e) => {
      e.preventDefault();
      success?.classList.add('hidden');
      error?.classList.add('hidden');

      const formData = new FormData(form);
      const btn = form.querySelector('button[type="submit"]') as HTMLButtonElement;
      const originalText = btn.textContent;
      btn.textContent = 'Sending...';
      btn.disabled = true;

      const payload: Record<string, string> = {};
      formData.forEach((value, key) => { payload[key] = value.toString(); });

      try {
        if (!FORM_ENDPOINT) {
          const subject = encodeURIComponent(`QIF Inquiry: ${payload.interest || 'General'} — ${payload.organization || 'Individual'}`);
          const body = encodeURIComponent(
            `Name: ${payload.name}\nEmail: ${payload.email}\nOrganization: ${payload.organization}\nInterest: ${payload.interest}\n\n${payload.message}`
          );
          window.location.href = `mailto:advisory@qinnovate.com?subject=${subject}&body=${body}`;
          success?.classList.remove('hidden');
          return;
        }

        const res = await fetch(FORM_ENDPOINT, {
          method: 'POST',
          body: JSON.stringify(payload),
          headers: { 'Content-Type': 'application/json' },
        });

        const result = await res.json();

        if (result.result === 'success') {
          form.reset();
          success?.classList.remove('hidden');
        } else {
          error?.classList.remove('hidden');
        }
      } catch {
        error?.classList.remove('hidden');
      } finally {
        btn.textContent = originalText;
        btn.disabled = false;
      }
    });
  }

  initForm();
  document.addEventListener('astro:after-swap', initForm);
</script>
