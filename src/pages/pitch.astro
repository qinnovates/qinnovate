---
/**
 * QIF Pitch Presentation — Kohno Meeting
 * ~12 slides, 15-minute walkthrough, 15 min discussion
 * Reveal.js via CDN, Apple Keynote aesthetic (white, system-ui, crystal glass)
 */
import { HOURGLASS_BANDS, QIF_VERSION, QIF_BANDS, PILLARS, COHERENCE } from '../lib/qif-constants';
import { THREAT_VECTORS, getThreatStats, getTaraStats } from '../lib/threat-data';
import { NSP_VERSION, NSP_LAYERS, NSP_POWER } from '../lib/nsp-constants';

const stats = getThreatStats();
const taraStats = getTaraStats();

const dualUseCount = taraStats.dualUse.confirmed + taraStats.dualUse.probable;
const dualUsePct = Math.round((dualUseCount / taraStats.total) * 100);

// Resolve pillar CSS var colors to hex for inline styles
const colorMap: Record<string, string> = {
  'var(--color-accent-primary)': '#2563eb',
  'var(--color-accent-secondary)': '#0891b2',
  'var(--color-accent-tertiary)': '#7c3aed',
};
function hex(c: string): string { return colorMap[c] ?? c; }

// Short labels for NSP layers in the pitch deck (derived from scope)
const nspShortLabels: Record<number, string> = {
  1: 'SPHINCS+ boot',
  2: 'ML-KEM + ECDH',
  3: 'Per-frame scoring',
  4: 'Test-time training',
  5: 'Spectral scanning',
};
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Qinnovate | Pitch</title>
  <meta name="robots" content="noindex, nofollow" />

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/dist/reveal.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/dist/theme/white.css" id="theme" />

  <style is:global>
    :root {
      --bg: #ffffff;
      --bg-surface: #f8fafc;
      --bg-elevated: #f1f5f9;
      --accent: #2563eb;
      --accent-secondary: #0891b2;
      --accent-tertiary: #7c3aed;
      --text: #0f172a;
      --text-secondary: #475569;
      --text-tertiary: #94a3b8;
      --border: rgba(15, 23, 42, 0.08);
      --glass-bg: rgba(255, 255, 255, 0.72);
      --glass-border: rgba(15, 23, 42, 0.06);
      --safe: #059669;
      --warn: #d97706;
      --danger: #dc2626;
      --ease: cubic-bezier(0.16, 1, 0.3, 1);
    }

    /* ═══ Typography — system-ui (SF Pro on macOS) ═══ */
    .reveal {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      color: var(--text);
      font-weight: 400;
      -webkit-font-smoothing: antialiased;
    }

    .reveal h1, .reveal h2, .reveal h3, .reveal h4 {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      color: var(--text);
      text-transform: none;
      font-weight: 600;
      letter-spacing: -0.025em;
    }

    .reveal h1 { font-size: 2.2em; font-weight: 700; letter-spacing: -0.03em; line-height: 1.1; }
    .reveal h2 { font-size: 1.35em; font-weight: 600; letter-spacing: -0.02em; line-height: 1.2; }
    .reveal h3 { font-size: 0.85em; font-weight: 600; }

    .reveal p, .reveal li {
      color: var(--text-secondary);
      line-height: 1.55;
      font-size: 0.62em;
    }

    .reveal code {
      font-family: ui-monospace, "SF Mono", SFMono-Regular, Menlo, monospace;
      background: var(--bg-elevated);
      padding: 0.1em 0.35em;
      border-radius: 5px;
      font-size: 0.82em;
      color: var(--accent);
    }

    .reveal .progress { color: var(--accent); height: 2px; }
    .reveal .controls button { color: var(--text-tertiary); }
    .reveal .slide-number {
      color: var(--text-tertiary);
      font-family: ui-monospace, "SF Mono", monospace;
      font-size: 11px;
      background: transparent;
      right: 16px;
      bottom: 10px;
    }

    /* ═══ Components ═══ */

    .glass {
      background: var(--glass-bg);
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
      border: 1px solid var(--glass-border);
      border-radius: 12px;
      padding: 16px;
      text-align: left;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04), 0 8px 24px rgba(0, 0, 0, 0.06);
    }

    .glass h3 { margin: 0 0 4px 0; font-size: 0.8em; }
    .glass p { margin: 0; font-size: 0.55em; color: var(--text-secondary); }

    .tag {
      display: inline-block;
      font-family: ui-monospace, "SF Mono", monospace;
      font-size: 0.42em;
      padding: 2px 8px;
      border-radius: 100px;
      margin-bottom: 6px;
      font-weight: 500;
    }

    .mono { font-family: ui-monospace, "SF Mono", monospace; }
    .faint { color: var(--text-tertiary); }
    .muted { color: var(--text-secondary); }
    .accent { color: var(--accent); }
    .cyan { color: var(--accent-secondary); }
    .purple { color: var(--accent-tertiary); }

    .label {
      font-family: system-ui, -apple-system, sans-serif;
      font-size: 0.42em;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--text-tertiary);
      margin-bottom: 8px;
      font-weight: 500;
    }

    /* Stat cards */
    .stats { display: flex; gap: 10px; justify-content: center; margin-top: 16px; flex-wrap: wrap; }
    .stat {
      background: var(--bg-surface);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 10px 18px;
      text-align: center;
      min-width: 90px;
    }
    .stat .n {
      font-family: system-ui, -apple-system, sans-serif;
      font-size: 1.6em;
      font-weight: 700;
      line-height: 1;
      margin-bottom: 3px;
      letter-spacing: -0.02em;
    }
    .stat .l {
      font-size: 0.44em;
      color: var(--text-tertiary);
      text-transform: uppercase;
      letter-spacing: 0.06em;
      font-weight: 500;
    }

    /* Quote */
    .quote { max-width: 640px; margin: 0 auto; }
    .quote blockquote {
      border-left: none;
      padding: 14px 0 14px 22px;
      margin: 0;
      font-size: 0.82em;
      color: var(--text);
      font-style: italic;
      line-height: 1.5;
      text-align: left;
      position: relative;
    }
    .quote blockquote::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 3px;
      border-radius: 2px;
      background: linear-gradient(180deg, var(--accent), var(--accent-secondary));
    }
    .quote .cite {
      font-size: 0.5em;
      color: var(--text-tertiary);
      margin-top: 10px;
      font-style: normal;
      text-align: left;
      padding-left: 22px;
    }

    /* Grid layouts */
    .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-top: 14px; }
    .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; align-items: start; text-align: left; }
    .grid-2 .span { grid-column: 1 / -1; text-align: center; }

    /* Band list */
    .bands { list-style: none; padding: 0; margin: 0; }
    .bands li { display: flex; align-items: center; gap: 6px; padding: 1px 0; font-size: 0.5em; }
    .dot { width: 7px; height: 7px; border-radius: 50%; flex-shrink: 0; }
    .bid { font-family: ui-monospace, "SF Mono", monospace; color: var(--text); width: 22px; font-size: 0.9em; font-weight: 600; }
    .bname { color: var(--text-secondary); }

    /* NSP layers */
    .layers { display: flex; flex-direction: column; gap: 4px; margin-top: 10px; }
    .layer {
      display: flex; align-items: center; gap: 8px;
      background: var(--bg-surface); border: 1px solid var(--border);
      border-radius: 8px; padding: 6px 12px; font-size: 0.5em; text-align: left;
    }
    .layer .ln { font-weight: 700; font-size: 1.1em; min-width: 20px; color: var(--accent-secondary); }
    .layer .ll { color: var(--text); font-weight: 500; }
    .layer .ls { color: var(--text-tertiary); font-size: 0.85em; margin-left: auto; }

    /* Dual-use mapping */
    .dualmap { display: flex; flex-direction: column; gap: 5px; font-size: 0.52em; }
    .dualrow {
      display: grid; grid-template-columns: 1fr auto 1fr; gap: 0 14px;
      align-items: center; padding: 7px 16px; border-radius: 8px;
      background: var(--bg-surface); border: 1px solid transparent;
      transition: all 0.4s var(--ease); position: relative; cursor: default;
    }
    .dualrow:hover {
      border-color: var(--accent); background: rgba(37, 99, 235, 0.04);
      transform: translateY(-1px); box-shadow: 0 4px 16px rgba(37, 99, 235, 0.08);
    }
    .dualrow .a { text-align: right; color: var(--danger); font-weight: 600; }
    .dualrow .arrow {
      color: var(--accent-secondary); font-size: 1.1em; font-weight: 300;
      transition: transform 0.4s var(--ease);
    }
    .dualrow:hover .arrow { transform: translateX(3px); color: var(--accent); }
    .dualrow .t { text-align: left; color: var(--safe); font-weight: 600; }
    .dualrow .tip {
      grid-column: 1 / -1; font-size: 0.82em; color: var(--text-tertiary);
      font-weight: 400; line-height: 1.4; padding-top: 4px;
      max-height: 0; overflow: hidden; opacity: 0;
      transition: all 0.4s var(--ease);
    }
    .dualrow:hover .tip { max-height: 80px; opacity: 1; }

    /* Honest list */
    .gaps { text-align: left; max-width: 580px; margin: 12px auto 0; }
    .gaps li { margin-bottom: 8px; font-size: 0.55em; padding-left: 6px; }
    .gaps li strong { color: var(--text); }

    /* Research questions */
    .questions { text-align: left; max-width: 600px; margin: 12px auto 0; }
    .questions li {
      position: relative; padding-left: 16px; margin-bottom: 10px; font-size: 0.55em;
    }
    .questions li::before {
      content: ''; position: absolute; left: 0; top: 6px;
      width: 6px; height: 6px; border-radius: 50%; background: var(--accent);
    }
    .questions li strong { color: var(--text); }
    .questions li em { color: var(--text-tertiary); font-size: 0.9em; }

    /* Contact */
    .links { display: flex; gap: 10px; justify-content: center; margin-top: 16px; flex-wrap: wrap; }
    .link {
      background: var(--bg-surface); border: 1px solid var(--border);
      border-radius: 100px; padding: 8px 18px;
      color: var(--text); text-decoration: none; font-size: 0.52em; font-weight: 500;
      transition: all 0.5s var(--ease);
    }
    .link:hover { background: var(--accent); color: white; border-color: var(--accent); transform: translateY(-1px); }

    /* Clickable stat cards */
    a.stat {
      text-decoration: none;
      transition: all 0.3s var(--ease);
      cursor: pointer;
    }
    a.stat:hover {
      border-color: var(--accent);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.1);
    }

    /* Fragment fade-in */
    .reveal .fragment { transition: all 0.5s var(--ease); }

    /* ═══ Music toggle ═══ */
    .music-toggle {
      position: fixed;
      bottom: 16px;
      left: 16px;
      z-index: 100;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      color: var(--text-tertiary);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.5s var(--ease);
    }
    .music-toggle:hover {
      border-color: var(--accent);
      color: var(--accent);
    }
    .music-toggle.playing {
      border-color: var(--accent);
      color: var(--accent);
      box-shadow: 0 0 12px rgba(37, 99, 235, 0.2);
    }
    .music-toggle svg { width: 16px; height: 16px; }
    .music-toggle .icon-pause { display: none; }
    .music-toggle.playing .icon-play { display: none; }
    .music-toggle.playing .icon-pause { display: block; }

    #sc-player { position: absolute; left: -9999px; width: 1px; height: 1px; }

    /* ═══ Ambient Background ═══ */
    .aurora-layer {
      position: fixed;
      inset: 0;
      z-index: 0;
      overflow: hidden;
      pointer-events: none;
      background: #ffffff;
    }
    .aurora-blob {
      position: absolute;
      border-radius: 50%;
      will-change: transform;
    }
    .aurora-blob--blue {
      width: 50vw;
      height: 50vw;
      top: -15%;
      right: -10%;
      background: radial-gradient(circle, #dbeafe 0%, transparent 70%);
      opacity: 0.8;
      filter: blur(60px);
      animation: aurora-drift-1 18s ease-in-out infinite alternate;
    }
    .aurora-blob--cyan {
      width: 45vw;
      height: 45vw;
      bottom: -10%;
      left: -8%;
      background: radial-gradient(circle, #cffafe 0%, transparent 70%);
      opacity: 0.6;
      filter: blur(80px);
      animation: aurora-drift-2 14s ease-in-out infinite alternate;
    }
    .aurora-blob--violet {
      width: 35vw;
      height: 35vw;
      top: 40%;
      left: 30%;
      background: radial-gradient(circle, #ede9fe 0%, transparent 70%);
      opacity: 0.5;
      filter: blur(100px);
      animation: aurora-drift-3 16s ease-in-out infinite alternate;
    }
    @keyframes aurora-drift-1 {
      0% { transform: translate(0, 0) scale(1); }
      100% { transform: translate(5vw, 4vh) scale(1.08); }
    }
    @keyframes aurora-drift-2 {
      0% { transform: translate(0, 0) scale(1); }
      100% { transform: translate(-4vw, -5vh) scale(1.05); }
    }
    @keyframes aurora-drift-3 {
      0% { transform: translate(0, 0) scale(1); }
      100% { transform: translate(-3vw, 3vh) scale(0.95); }
    }

    /* Flowing wave overlay */
    .wave-layer {
      position: fixed;
      inset: 0;
      z-index: 1;
      pointer-events: none;
      overflow: hidden;
    }
    .wave-layer svg {
      position: absolute;
      width: 250%;
      left: -75%;
    }
    .wave-layer .wave-1 { top: 8%;  animation: wave-flow-1 14s ease-in-out infinite alternate; }
    .wave-layer .wave-2 { top: 22%; animation: wave-flow-2 18s ease-in-out infinite alternate; }
    .wave-layer .wave-3 { top: 42%; animation: wave-flow-3 16s ease-in-out infinite alternate; }
    .wave-layer .wave-4 { top: 62%; animation: wave-flow-4 20s ease-in-out infinite alternate; }
    .wave-layer .wave-5 { top: 80%; animation: wave-flow-5 15s ease-in-out infinite alternate; }
    @keyframes wave-flow-1 {
      0%   { transform: translateX(0) scaleY(1); }
      100% { transform: translateX(12%) scaleY(1.15); }
    }
    @keyframes wave-flow-2 {
      0%   { transform: translateX(0) scaleY(1); }
      100% { transform: translateX(-10%) scaleY(0.85); }
    }
    @keyframes wave-flow-3 {
      0%   { transform: translateX(0) scaleY(1); }
      100% { transform: translateX(8%) scaleY(1.2); }
    }
    @keyframes wave-flow-4 {
      0%   { transform: translateX(0) scaleY(1); }
      100% { transform: translateX(-14%) scaleY(0.9); }
    }
    @keyframes wave-flow-5 {
      0%   { transform: translateX(0) scaleY(1); }
      100% { transform: translateX(10%) scaleY(1.1); }
    }

    /* Noise texture */
    .noise-layer {
      position: fixed;
      inset: 0;
      z-index: 2;
      pointer-events: none;
      opacity: 0.025;
      mix-blend-mode: multiply;
    }

    /* Ensure Reveal sits above background layers with transparent bg */
    .reveal-viewport,
    .reveal-viewport .reveal,
    .reveal-viewport .reveal .slides,
    .reveal-viewport .reveal .slides section {
      background: transparent !important;
    }
    .reveal-viewport { position: relative; z-index: 3; }
    .reveal { position: relative; z-index: 3; }

    @media (max-width: 768px) {
      .grid-3 { grid-template-columns: 1fr; }
      .grid-2 { grid-template-columns: 1fr; }
      .stats { flex-direction: column; align-items: center; }
    }
  </style>
</head>
<body style="background: #ffffff;">
  <!-- Ambient color washes -->
  <div class="aurora-layer" aria-hidden="true">
    <div class="aurora-blob aurora-blob--blue"></div>
    <div class="aurora-blob aurora-blob--cyan"></div>
    <div class="aurora-blob aurora-blob--violet"></div>
  </div>

  <!-- Flowing waves -->
  <div class="wave-layer" aria-hidden="true">
    <svg class="wave-1" viewBox="0 0 1440 160" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M0,80 C180,30 360,130 540,70 C720,10 900,120 1080,80 C1260,40 1350,110 1440,80" fill="none" stroke="rgba(37,99,235,0.06)" stroke-width="2" stroke-linecap="round"/>
      <path d="M0,95 C200,50 400,140 600,85 C800,30 1000,130 1200,90 C1350,60 1400,100 1440,95" fill="none" stroke="rgba(8,145,178,0.04)" stroke-width="1.5" stroke-linecap="round"/>
      <path d="M0,65 C160,110 340,20 520,65 C700,110 880,25 1060,70 C1240,115 1380,40 1440,65" fill="none" stroke="rgba(37,99,235,0.03)" stroke-width="1" stroke-linecap="round"/>
    </svg>
    <svg class="wave-2" viewBox="0 0 1440 160" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M0,90 C240,40 480,140 720,80 C960,20 1200,130 1440,90" fill="none" stroke="rgba(8,145,178,0.055)" stroke-width="2" stroke-linecap="round"/>
      <path d="M0,70 C300,120 600,30 900,75 C1200,120 1380,45 1440,70" fill="none" stroke="rgba(37,99,235,0.035)" stroke-width="1.5" stroke-linecap="round"/>
    </svg>
    <svg class="wave-3" viewBox="0 0 1440 160" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M0,75 C200,120 400,25 600,80 C800,135 1000,30 1200,75 C1360,110 1420,55 1440,75" fill="none" stroke="rgba(37,99,235,0.07)" stroke-width="2.5" stroke-linecap="round"/>
      <path d="M0,55 C260,100 520,10 780,60 C1040,110 1300,15 1440,55" fill="none" stroke="rgba(124,58,237,0.03)" stroke-width="1.5" stroke-linecap="round"/>
      <path d="M0,95 C180,50 360,130 540,90 C720,50 900,125 1080,85 C1260,45 1380,120 1440,95" fill="none" stroke="rgba(8,145,178,0.035)" stroke-width="1" stroke-linecap="round"/>
    </svg>
    <svg class="wave-4" viewBox="0 0 1440 160" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M0,85 C300,30 600,140 900,80 C1200,20 1350,120 1440,85" fill="none" stroke="rgba(8,145,178,0.06)" stroke-width="2" stroke-linecap="round"/>
      <path d="M0,100 C220,60 440,135 660,95 C880,55 1100,130 1320,90 C1400,75 1440,100 1440,100" fill="none" stroke="rgba(37,99,235,0.04)" stroke-width="1.5" stroke-linecap="round"/>
    </svg>
    <svg class="wave-5" viewBox="0 0 1440 160" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M0,70 C160,120 340,20 540,75 C740,130 920,30 1100,80 C1280,130 1400,50 1440,70" fill="none" stroke="rgba(37,99,235,0.05)" stroke-width="2" stroke-linecap="round"/>
      <path d="M0,90 C280,45 560,135 840,85 C1120,35 1340,125 1440,90" fill="none" stroke="rgba(124,58,237,0.025)" stroke-width="1" stroke-linecap="round"/>
    </svg>
  </div>

  <!-- Noise texture -->
  <svg class="noise-layer" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="100%" height="100%">
    <filter id="noise">
      <feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="4" stitchTiles="stitch" />
    </filter>
    <rect width="100%" height="100%" filter="url(#noise)" />
  </svg>

  <div class="reveal">
    <div class="slides">

      <!-- ═══ 1. TITLE ═══ -->
      <section>
        <p class="label">Open Standards for Neural Security</p>
        <h1 style="margin-bottom: 0;">Qinnovate</h1>
        <p style="font-size: 0.72em; color: var(--accent); margin-top: 6px; font-weight: 500;">
          The missing security layer for brain-computer interfaces.
        </p>
        <div style="margin-top: 28px;">
          <p style="font-size: 0.55em; color: var(--text); margin: 0; font-weight: 500;">Kevin Qi</p>
          <p style="font-size: 0.4em; margin-top: 4px;" class="faint">
            qinnovate.com &nbsp;|&nbsp; QIF v{QIF_VERSION} &nbsp;|&nbsp; Apache 2.0
          </p>
        </div>
        <aside class="notes">
          Thank you for making time. I know your schedule is demanding, so I'll keep this tight
          and leave plenty of room for your questions. I'm here to learn from you, not to sell anything.
        </aside>
      </section>

      <!-- ═══ 2. THE ORIGIN — Kohno's own words ═══ -->
      <section>
        <p class="label">Where this started</p>
        <div class="quote">
          <blockquote>
            "Neurosecurity is a term we are using to refer to security, privacy,
            and ethical issues related to neural devices."
          </blockquote>
          <p class="cite">
            Denning, Matsuoka &amp; <strong>Kohno</strong><br />
            <em>Neurosurgical Focus</em> 27(1):E7, July 2009
          </p>
        </div>
        <p style="font-size: 0.58em; margin-top: 20px; max-width: 480px; margin-left: auto; margin-right: auto; color: var(--text);">
          You named the field. You defined the problem.<br />
          <span style="color: var(--accent);">Let me help build the architecture.</span>
        </p>
        <aside class="notes">
          This is the paper that started everything for me. You, Denning, and Matsuoka
          literally named the field. I've been working to build the technical scaffolding
          underneath that vision.
        </aside>
      </section>

      <!-- ═══ 3. THE GAP ═══ -->
      <section>
        <h2>The field has a structural problem.</h2>
        <p style="max-width: 520px; margin: 8px auto 0;">
          16 years of excellent research. No unified framework to connect it.
        </p>
        <div class="stats">
          <a class="stat" href="https://qinnovate.com/TARA/" target="_blank">
            <div class="n" style="color: var(--warn);">~20</div>
            <div class="l">Published BCI<br />attack papers</div>
          </a>
          <a class="stat" href="https://qinnovate.com/framework/" target="_blank">
            <div class="n" style="color: var(--danger);">0</div>
            <div class="l">Unified threat<br />frameworks</div>
          </a>
          <a class="stat" href="https://qinnovate.com/nsp/" target="_blank">
            <div class="n" style="color: var(--danger);">0</div>
            <div class="l">Wire-level<br />BCI crypto</div>
          </a>
          <a class="stat" href="https://qinnovate.com/nsp/" target="_blank">
            <div class="n" style="color: var(--danger);">0</div>
            <div class="l">Post-quantum<br />neural protocols</div>
          </a>
        </div>
        <p style="font-size: 0.38em; margin-top: 14px;" class="faint">
          Martinovic 2012 &middot; Takabi 2016 &middot; Frank 2017 &middot; Bernal 2021 &middot; Landau 2020 &middot; Meng 2023
        </p>
        <aside class="notes">
          Martinovic showed P300 side-channels in 2012. Takabi catalogued BCI threats.
          Frank demonstrated EEG spoofing. But nobody built a unified model that
          accounts for both the silicon and the biology. That's the gap.
        </aside>
      </section>

      <!-- ═══ 4. WHAT I BUILT — Three Pillars ═══ -->
      <section>
        <p class="label">Three open specifications</p>
        <h2>A complete security stack for neural interfaces.</h2>
        <div class="grid-3">
          {PILLARS.map(p => {
            const c = hex(p.color);
            return (
            <div class="glass">
              <span class="tag" style={`background: ${c}10; color: ${c}; border: 1px solid ${c}25;`}>
                {p.name} v{p.version}
              </span>
              <h3 style={`color: ${c};`}>{p.fullName}</h3>
              <p>{p.tagline}</p>
              <p style="margin-top: 4px; font-size: 0.48em;" class="faint">{p.description}</p>
            </div>
          )})}
        </div>
        <aside class="notes">
          QIF is the threat model. NSP is the wire protocol. Runemate solves the bandwidth
          problem that makes post-quantum encryption practical on implantable power budgets.
          All three are open spec, Apache 2.0. I don't want to sell certifications. I want
          the field to adopt this.
        </aside>
      </section>

      <!-- ═══ 5. THE HOURGLASS ═══ -->
      <section>
        <div class="grid-2">
          <div class="span">
            <h2>One model. Both sides of the electrode.</h2>
            <p style="font-size: 0.55em; max-width: 480px; margin: 4px auto 0;">
              {QIF_BANDS} bands across three zones. OSI stops at silicon.
              This goes through tissue.
            </p>
          </div>
          <div>
            <ul class="bands">
              {HOURGLASS_BANDS.map(b => (
                <li>
                  <span class="dot" style={`background: ${b.color};`}></span>
                  <span class="bid">{b.id}</span>
                  <span class="bname">{b.name}</span>
                </li>
              ))}
            </ul>
          </div>
          <div>
            <div class="glass" style="padding: 10px 14px;">
              <h3 style="font-size: 0.65em; color: var(--safe); margin-bottom: 2px;">Neural (N7-N1)</h3>
              <p style="font-size: 0.48em;">Biology. Cannot be patched or rebooted.</p>
            </div>
            <div class="glass" style="padding: 10px 14px; margin-top: 6px;">
              <h3 style="font-size: 0.65em; color: var(--warn); margin-bottom: 2px;">Interface (I0)</h3>
              <p style="font-size: 0.48em;">The waist. Where physics changes.</p>
            </div>
            <div class="glass" style="padding: 10px 14px; margin-top: 6px;">
              <h3 style="font-size: 0.65em; color: var(--accent); margin-bottom: 2px;">Synthetic (S1-S3)</h3>
              <p style="font-size: 0.48em;">Silicon. Encryptable, patchable, monitorable.</p>
            </div>
          </div>
        </div>
        <aside class="notes">
          The key insight: the hourglass pinches at I0, the electrode-tissue boundary.
          Above it, you're in biology where you can't deploy patches. Below it, you're
          in silicon where classical security tools work. The interface layer is where
          the hardest problems live, and it's where your 2009 paper focused.
        </aside>
      </section>

      <!-- ═══ 6. THREAT REGISTRY & SCORING ═══ -->
      <section>
        <p class="label">TARA &mdash; Therapeutic Atlas of Risks and Applications</p>
        <h2>Threat registry and vulnerability scoring.</h2>
        <p style="max-width: 480px; margin: 6px auto 0;">
          Every technique mapped to hourglass bands and scored with NISS &mdash; a neural-specific severity metric.
        </p>
        <div class="stats">
          <a class="stat" href="https://qinnovate.com/TARA/" target="_blank">
            <div class="n accent">{stats.total}</div>
            <div class="l">Techniques<br />catalogued</div>
          </a>
          <a class="stat" href="https://qinnovate.com/framework/" target="_blank">
            <div class="n cyan">{QIF_BANDS}</div>
            <div class="l">Hourglass<br />bands</div>
          </a>
          <a class="stat" href="https://qinnovate.com/TARA/" target="_blank">
            <div class="n" style="color: var(--danger);">{stats.critical}</div>
            <div class="l">Critical<br />severity</div>
          </a>
          <a class="stat" href="https://qinnovate.com/scoring/" target="_blank">
            <div class="n purple">6</div>
            <div class="l">NISS scoring<br />dimensions</div>
          </a>
        </div>
        <p style="font-size: 0.4em; margin-top: 14px;" class="faint">
          Click any card above &mdash; browsable at qinnovate.com/TARA
        </p>
        <aside class="notes">
          Every technique has a NISS score — like CVSS but for neural systems. It scores
          across reversibility, cognitive impact, tissue risk, consent requirements, and
          two more dimensions. The whole registry is browsable on the site. Click any card
          to see the live data.
        </aside>
      </section>

      <!-- ═══ 7. NSP PROTOCOL ═══ -->
      <section>
        <p class="label">Neural Sensory Protocol v{NSP_VERSION}</p>
        <h2>Post-quantum crypto that fits on an implant.</h2>
        <p style="max-width: 480px; margin: 4px auto 0;">
          Five defense layers. FIPS 203/204/205 compliant. {NSP_POWER.totalOverheadPercent}% power overhead.
        </p>
        <div class="layers" style="max-width: 560px; margin: 10px auto 0;">
          {NSP_LAYERS.map(layer => (
            <div class="layer">
              <span class="ln">L{layer.id}</span>
              <span class="ll">{layer.name}</span>
              <span class="ls">{nspShortLabels[layer.id] ?? ''}</span>
            </div>
          ))}
        </div>
        <div class="stats" style="margin-top: 10px;">
          <a class="stat" href="https://qinnovate.com/nsp/" target="_blank">
            <div class="n accent">{NSP_POWER.totalOverheadPercent}%</div>
            <div class="l">Power<br />overhead</div>
          </a>
          <a class="stat" href="https://github.com/qinnovates/qinnovate/blob/main/qif-framework/NSP-PROTOCOL-SPEC.md" target="_blank">
            <div class="n accent">v{NSP_VERSION}</div>
            <div class="l">Draft RFC</div>
          </a>
        </div>
        <aside class="notes">
          The power budget is modeled, not measured. 3.25% of a 10mW implantable budget.
          That's the theoretical ceiling. Runemate compression is what makes PQC key sizes
          practical at BCI bandwidths. I'd love your take on whether these constraints are
          realistic for implantable devices.
        </aside>
      </section>

      <!-- ═══ 8. THE DUAL-USE DISCOVERY ═══ -->
      <section>
        <h2>Every attack mechanism<br />has a therapeutic twin.</h2>
        <p style="max-width: 480px; margin: 8px auto 0;">
          The threat registry revealed something unexpected. The same physics
          that enables an attack enables a therapy.
        </p>
        <div style="margin-top: 16px;">
          <p style="font-size: 0.68em; color: var(--text); line-height: 1.7;">
            Signal injection <span style="color: var(--accent);">=</span> deep brain stimulation.<br />
            Replay attacks <span style="color: var(--accent);">=</span> neurofeedback protocols.<br />
            <strong style="color: var(--accent);">The difference is consent, dosage, and oversight.</strong>
          </p>
        </div>
        <p style="font-size: 0.4em; margin-top: 16px;" class="faint">
          Same mechanism. Four projections: Security / Clinical / Governance / Engineering
        </p>
        <aside class="notes">
          This is the part I think connects most to your current work at the Center for
          Digital Ethics. The security framework became a dual-use map. The same physics
          that makes an attack dangerous makes a therapy effective. The distinguishing
          variables are ethical, not physical: informed consent, dosage control, clinical
          oversight. That's a governance problem, not just an engineering problem.
        </aside>
      </section>

      <!-- ═══ 9. DUAL-USE MAPPING ═══ -->
      <section>
        <h2>~{dualUsePct}% map today. The rest define the frontier.</h2>
        <div class="dualmap" style="max-width: 520px; margin: 14px auto 0;">
          <div class="dualrow">
            <span class="a">Signal injection</span><span class="arrow">&rarr;</span><span class="t">Deep brain stimulation</span>
            <span class="tip">Same electrical pulse that hijacks motor commands powers therapeutic DBS for Parkinson's and depression.</span>
          </div>
          <div class="dualrow">
            <span class="a">Phase replay</span><span class="arrow">&rarr;</span><span class="t">Neurostimulation protocols</span>
            <span class="tip">Replaying neural patterns to spoof identity uses the same mechanism as closed-loop stimulation restoring lost function.</span>
          </div>
          <div class="dualrow">
            <span class="a">Adversarial perturbation</span><span class="arrow">&rarr;</span><span class="t">Seizure suppression</span>
            <span class="tip">Perturbations that disrupt neural decoding use the same principle as responsive neurostimulation (RNS) disrupting seizure onset.</span>
          </div>
          <div class="dualrow">
            <span class="a">Slow drift manipulation</span><span class="arrow">&rarr;</span><span class="t">Adaptive neuromodulation</span>
            <span class="tip">Gradual parameter drift that poisons calibration is the same adaptive mechanism adjusting stimulation to changing neural states.</span>
          </div>
          <div class="dualrow">
            <span class="a">EM side-channel</span><span class="arrow">&rarr;</span><span class="t">TMS / tDCS diagnostics</span>
            <span class="tip">EM emissions that leak neural data use the same coupling exploited by transcranial magnetic and current stimulation for therapy.</span>
          </div>
        </div>
        <div class="stats" style="margin-top: 14px;">
          <a class="stat" href="https://qinnovate.com/TARA/" target="_blank">
            <div class="n" style="color: var(--safe);">{taraStats.dualUse.confirmed}</div>
            <div class="l">Confirmed</div>
          </a>
          <a class="stat" href="https://qinnovate.com/TARA/" target="_blank">
            <div class="n cyan">{taraStats.dualUse.probable}</div>
            <div class="l">Probable</div>
          </a>
          <a class="stat" href="https://qinnovate.com/TARA/" target="_blank">
            <div class="n faint">{taraStats.dualUse.silicon_only}</div>
            <div class="l">Silicon only</div>
          </a>
          <a class="stat" href="https://qinnovate.com/TARA/" target="_blank">
            <div class="n" style="color: var(--safe);">{taraStats.clinicalCount}</div>
            <div class="l">Clinical data</div>
          </a>
        </div>
        <aside class="notes">
          31 confirmed, 15 probable. 16 are silicon-only with no therapeutic mapping today.
          That gap is honest. Some attack vectors might never have therapeutic analogs, and
          I don't want to overclaim. But the pattern is strong enough that I think the
          framework itself is a useful tool for thinking about both sides simultaneously.
        </aside>
      </section>

      <!-- ═══ 10. WHERE IT BREAKS ═══ -->
      <section>
        <h2>What I don't know yet.</h2>
        <ul class="gaps" style="list-style: none; padding: 0;">
          <li>
            <strong style="color: var(--warn);">No empirical validation.</strong>
            Derived from literature and first principles. Currently limited to BrainFlow synthetic data. Needs real BCI hardware and patient data.
          </li>
          <li>
            <strong style="color: var(--warn);">Power budget is modeled, not measured.</strong>
            {NSP_POWER.totalOverheadPercent}% overhead on paper. Needs silicon prototyping.
          </li>
          <li>
            <strong style="color: var(--warn);">~40% of techniques have no therapeutic analog.</strong>
            The dual-use insight has real limits. I've scoped them explicitly.
          </li>
          <li>
            <strong style="color: var(--warn);">Solo researcher, AI-assisted.</strong>
            Claude and Gemini helped validate. No wet-lab collaborators or patient data access.
          </li>
        </ul>
        <aside class="notes">
          I want to be completely honest with you about what this is and what it isn't.
          It's a framework, not a product. It's derived, not empirical. I've tried to be
          rigorous about scoping claims, but I know the biggest thing missing is contact
          with reality. That's what I'm hoping to get help with.
        </aside>
      </section>

      <!-- ═══ 11. WHAT I'M LOOKING FOR ═══ -->
      <section>
        <h2>Four questions only you can answer.</h2>
        <ul class="questions" style="list-style: none; padding: 0;">
          <li>
            <strong>Does the hourglass model hold?</strong><br />
            <em>Does an {QIF_BANDS}-band architecture meaningfully capture the BCI threat surface,
            or are there gaps the model misses?</em>
          </li>
          <li>
            <strong>Can TARA inform governance?</strong><br />
            <em>Could a dual-use registry help regulators distinguish therapeutic
            vs. adversarial use of the same mechanism?</em>
          </li>
          <li>
            <strong>Is {NSP_POWER.totalOverheadPercent}% power overhead realistic?</strong><br />
            <em>Post-quantum crypto on a 10mW implant. Feasible, or does it need
            a fundamentally different approach?</em>
          </li>
          <li>
            <strong>Where should I go next?</strong><br />
            <em>Graduate program, industry lab, independent research? I want your honest
            read on the most productive path.</em>
          </li>
        </ul>
        <aside class="notes">
          These aren't hypothetical questions. I genuinely don't know the answers, and
          you're one of the few people in the world who can help me think through them.
          The last question is personal. I'm trying to figure out the right path to make
          the most impact with this work.
        </aside>
      </section>

      <!-- ═══ 12. THANK YOU ═══ -->
      <section>
        <p class="label">Thank you</p>
        <h2 style="margin-bottom: 8px;">You named this field.<br />Let me help build it.</h2>
        <p style="font-size: 0.58em; max-width: 420px; margin: 8px auto 0;">
          Everything is open source. I'm looking for mentorship, not funding.
          Point me in the right direction and I'll do the work.
        </p>
        <div class="links" style="margin-top: 22px;">
          <a class="link" href="https://qinnovate.com" target="_blank">qinnovate.com</a>
          <a class="link" href="https://qinnovate.com/framework/" target="_blank">Framework</a>
          <a class="link" href="https://qinnovate.com/TARA/" target="_blank">TARA Atlas</a>
          <a class="link" href="https://github.com/qinnovates" target="_blank">GitHub</a>
        </div>
        <p style="font-size: 0.38em; margin-top: 22px;" class="faint">
          Kevin Qi &nbsp;|&nbsp; Qinnovate &nbsp;|&nbsp; Open Standard &nbsp;|&nbsp; Apache 2.0
        </p>
        <aside class="notes">
          Thank you. I mean this sincerely. Your 2009 paper is why this work exists.
          Everything is public, everything is open source. I'm not selling anything.
          I'm asking for guidance from someone who's been thinking about this longer
          than almost anyone.
        </aside>
      </section>

    </div>
  </div>

  <!-- Music toggle -->
  <button class="music-toggle" id="music-toggle" title="Toggle music">
    <svg class="icon-play" viewBox="0 0 24 24" fill="currentColor"><polygon points="6,3 20,12 6,21" /></svg>
    <svg class="icon-pause" viewBox="0 0 24 24" fill="currentColor"><rect x="5" y="3" width="4" height="18" /><rect x="15" y="3" width="4" height="18" /></svg>
  </button>

  <!-- SoundCloud Widget (hidden) -->
  <iframe id="sc-player"
    scrolling="no" frameborder="no" allow="autoplay"
    src="https://w.soundcloud.com/player/?url=https%3A//soundcloud.com/keviano/kulhi-loach&auto_play=false&hide_related=true&show_comments=false&show_user=false&show_reposts=false&show_teaser=false&visual=false">
  </iframe>

  <script is:inline src="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/dist/reveal.js"></script>
  <script is:inline src="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/plugin/notes/notes.js"></script>
  <script is:inline>
    var revealReady = Reveal.initialize({
      hash: true,
      slideNumber: 'c/t',
      showSlideNumber: 'all',
      width: 1280,
      height: 720,
      margin: 0.07,
      transition: 'fade',
      transitionSpeed: 'default',
      center: true,
      controls: true,
      controlsLayout: 'edges',
      progress: true,
      history: true,
      keyboard: true,
      overview: true,
      touch: true,
      plugins: [ RevealNotes ],
    });
  </script>

  <!-- SoundCloud Widget API -->
  <script is:inline src="https://w.soundcloud.com/player/api.js"></script>
  <script is:inline>
    (function() {
      var toggle = document.getElementById('music-toggle');
      var iframe = document.getElementById('sc-player');
      var widget = null;
      var widgetReady = false;
      var isPlaying = false;
      var pendingPlay = false;

      function initWidget() {
        if (typeof SC === 'undefined' || !SC.Widget) {
          setTimeout(initWidget, 100);
          return;
        }
        widget = SC.Widget(iframe);
        widget.bind(SC.Widget.Events.READY, function() {
          widgetReady = true;
          widget.setVolume(40);
          if (pendingPlay) {
            pendingPlay = false;
            widget.play();
          }
        });
        widget.bind(SC.Widget.Events.PLAY, function() {
          isPlaying = true;
          toggle.classList.add('playing');
        });
        widget.bind(SC.Widget.Events.PAUSE, function() {
          isPlaying = false;
          toggle.classList.remove('playing');
        });
        widget.bind(SC.Widget.Events.FINISH, function() {
          widget.seekTo(0);
          widget.play();
        });
        widget.bind(SC.Widget.Events.ERROR, function() {
          isPlaying = false;
          toggle.classList.remove('playing');
        });
      }

      toggle.addEventListener('click', function(e) {
        e.stopPropagation();
        e.preventDefault();
        if (!widgetReady || !widget) {
          pendingPlay = true;
          toggle.classList.add('playing');
          return;
        }
        if (isPlaying) {
          widget.pause();
        } else {
          widget.play();
        }
      });

      // Auto-play music on first slide advance (wait for Reveal to be ready)
      var musicStarted = false;
      revealReady.then(function() {
        Reveal.on('slidechanged', function(event) {
          if (!musicStarted && event.indexh >= 1) {
            musicStarted = true;
            if (widgetReady && widget) {
              widget.play();
            } else {
              pendingPlay = true;
              toggle.classList.add('playing');
            }
          }
        });
      });

      initWidget();
    })();
  </script>
</body>
</html>
